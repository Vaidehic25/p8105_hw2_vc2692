p8105_hw2_vc2692
================
2025-09-27

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.2     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

# Problem 1

## Cleaning pols-month.csv

``` r
pols_month_df =
  read_csv("dataset/fivethirtyeight_datasets/pols-month.csv") |> 
  separate (
    mon, into = c("year", "month", "day"), sep = "-"
  ) |> 
  mutate(month = month.name[as.integer(month)]) |> 
  mutate(month = str_to_lower(month),
         year = as.integer(year)) |> 
  pivot_longer(
    cols = c(prez_gop, prez_dem),
    names_to = "president",
    values_to = "president_value",
    names_prefix = "prez_"
  ) |> 
  filter(president_value == 1) |> 
  select (-day, -president_value)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Cleaning snp.csv

``` r
snp_df = 
  read_csv("dataset/fivethirtyeight_datasets/snp.csv") |> 
  separate (
    date, into = c("month", "day", "year"), sep = "/"
  ) |> 
  mutate(month = month.name[as.integer(month)]) |> 
  mutate(month = str_to_lower(month)) |> 
  select(-day) |> 
  mutate(
    year_int = as.integer(year),
    year_full = if_else(year_int >= 0  & year_int <=15, 2000 + year_int, 1900 + year_int)
  ) |> 
  select(-year, -year_int) |> 
  rename(year = year_full) |> 
  relocate(year)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## cleaning unemployment.csv

``` r
unemployment_df = 
  read_csv("dataset/fivethirtyeight_datasets/unemployment.csv") |> 
  janitor::clean_names() |> 
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "percent_unemp"
  ) |> 
   mutate(month = month.name[match(month, month)]) |> 
  mutate(month = str_to_lower(month))
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Joining the three datasets

``` r
pols_snp_joined =
  left_join(pols_month_df, snp_df, by = c("year", "month"))
all_joined = 
  left_join(pols_snp_joined, unemployment_df, by = c("year", "month"))
```

The three datasets that were joined in problem 1 are “pols-month”, “snp”
and “unemployement”. Pols_month included data on the number of national
politicians who are democratic or republican from January 1947 to June
2015. Snp included the closing values of the S&P stock index from each
month from January 1950-July 2015. Unemployment included the percentage
of unemployment for each month from January 1948 to December 2015. The
resulting joined data set had 817 observations and 11 variables. It
included information from January 1947 to June 2015. Key variables
include the number of national politicians who are republican/democrat,
along with the unemployment proportion, and closing values of the S&P
stock index.
