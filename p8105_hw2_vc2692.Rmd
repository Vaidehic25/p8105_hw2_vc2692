---
title: "p8105_hw2_vc2692"
output: github_document
date: "2025-09-27"
---

```{r - loading tidyverse}
library(tidyverse)
library(readxl)
```

# Problem 1

## Cleaning pols-month.csv

```{r}

pols_month_df =
  read_csv("dataset/fivethirtyeight_datasets/pols-month.csv") |> 
  separate (
    mon, into = c("year", "month", "day"), sep = "-"
  ) |> 
  mutate(month = month.name[as.integer(month)]) |> 
  mutate(month = str_to_lower(month),
         year = as.integer(year)) |> 
  pivot_longer(
    cols = c(prez_gop, prez_dem),
    names_to = "president",
    values_to = "president_value",
    names_prefix = "prez_"
  ) |> 
  filter(president_value == 1) |> 
  select (-day, -president_value)
         
```

## Cleaning snp.csv

```{r}

snp_df = 
  read_csv("dataset/fivethirtyeight_datasets/snp.csv") |> 
  separate (
    date, into = c("month", "day", "year"), sep = "/"
  ) |> 
  mutate(month = month.name[as.integer(month)]) |> 
  mutate(month = str_to_lower(month)) |> 
  select(-day) |> 
  mutate(
    year_int = as.integer(year),
    year_full = if_else(year_int >= 0  & year_int <=15, 2000 + year_int, 1900 + year_int)
  ) |> 
  select(-year, -year_int) |> 
  rename(year = year_full) |> 
  relocate(year)
```

## cleaning unemployment.csv

```{r}
unemployment_df = 
  read_csv("dataset/fivethirtyeight_datasets/unemployment.csv") |> 
  janitor::clean_names() |> 
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "percent_unemp"
  ) |> 
   mutate(month = month.name[match(month, month)]) |> 
  mutate(month = str_to_lower(month))
  
```

## Joining the three datasets

```{r}
pols_snp_joined =
  left_join(pols_month_df, snp_df, by = c("year", "month"))
all_joined = 
  left_join(pols_snp_joined, unemployment_df, by = c("year", "month"))
```


The three datasets that were joined in problem 1 are "pols-month", "snp" and "unemployement". Pols_month included data on the number of national politicians who are democratic or republican from January 1947 to June 2015. Snp included the closing values of the S&P stock index from each month from January 1950-July 2015. Unemployment included the percentage of unemployment for each month from January 1948 to December 2015. The resulting joined data set had 817 observations and 11 variables. It included information from January 1947 to June 2015. Key variables include the number of national politicians who are republican/democrat, along with the unemployment proportion, and closing values of the S&P stock index.


# Problem 2

```{r}
mr_trash_df =
  read_excel("dataset/trash_wheel_data.xlsx", 
             sheet = "Mr. Trash Wheel",
             na = c(".", "NA", ""),
             range="A2:N653" ) |> 
  janitor::clean_names() |> 
  mutate(
    sports_balls = as.integer(round(sports_balls))) |> 
  mutate(
    wheel_name = "Mr"
  ) |> 
  mutate(
    year = as.integer(year)
  )

professor_trash_df = 
  read_excel("dataset/trash_wheel_data.xlsx", 
             sheet = "Professor Trash Wheel",
             na = c(".", "NA", ""),
             range="A2:M121" ) |> 
  janitor::clean_names() |> 
  mutate(
    wheel_name = "Professor"
  )

gwynnda_trash_df = 
  read_excel("dataset/trash_wheel_data.xlsx", 
             sheet = "Gwynnda Trash Wheel",
             na = c(".", "NA", ""),
             range="A2:L265" ) |> 
  janitor::clean_names() |> 
  mutate(
    wheel_name = "Gwynnda"
  )
```

```{r}

all_wheels_joined = 
  bind_rows(mr_trash_df, professor_trash_df, gwynnda_trash_df) |> 
  relocate(
    wheel_name
  )

```


str(mr_trash_df$year)
str(professor_trash_df$year)





